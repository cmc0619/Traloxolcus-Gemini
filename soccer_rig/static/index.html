<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer Cam</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Soccer Cam: <span id="node-id">Loading...</span></h1>
            <span id="system-status" class="badge">Checking...</span>
        </header>

        <main>
            <!-- Camera Preview Card -->
            <div class="card preview-card">
                <div class="preview-container">
                    <img id="cam-preview" src="" alt="Camera Preview" onerror="this.style.display='none'">
                    <div class="overlay">
                        <button id="btn-snapshot" class="btn secondary">ðŸ“· Snap</button>
                    </div>
                </div>
            </div>

            <!-- Status Grid -->
            <div class="status-grid">
                <div class="card stat-card">
                    <h3>Status</h3>
                    <p id="rec-status">Idle</p>
                </div>
                <div class="card stat-card">
                    <h3>Time Sync</h3>
                    <p id="time-offset">0.00ms</p>
                </div>
                <div class="card stat-card">
                    <h3>Storage</h3>
                    <p id="storage-free">-- GB</p>
                </div>
                <div class="card stat-card">
                    <h3>Battery</h3>
                    <p id="battery-level">--%</p>
                </div>
            </div>

            <!-- Controls -->
            <div class="card controls-card">
                <div class="input-group">
                    <label>Session ID:</label>
                    <input type="text" id="session-id" placeholder="match_01" value="match_01">
                </div>
                <div class="btn-group">
                    <button id="btn-record" class="btn primary">Start Recording</button>
                    <button id="btn-stop" class="btn danger" disabled>Stop Recording</button>
                </div>
            </div>

            <!-- Uplink / Home Wi-Fi -->
            <div class="card settings-card">
                <h3>Uplink Network (Upload Mode)</h3>
                <p style="color: #888; font-size: 0.9em; margin-bottom: 10px;">Switch entire rig to Home Wi-Fi</p>
                <div class="input-group">
                    <label>Home SSID</label>
                    <input type="text" id="net-uplink-ssid" placeholder="MyHomeWiFi">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="net-uplink-psk" placeholder="********">
                </div>
                <button id="btn-uplink" class="btn secondary"
                    style="border: 1px solid var(--accent); color: var(--accent);">
                    âš¡ Connect All Nodes
                </button>
            </div>

            <!-- Settings -->
            <div class="card settings-card">
                <h3>System Controls</h3>
                <div class="status-grid" style="grid-template-columns: 1fr 1fr; margin-bottom: 16px;">
                    <div style="text-align:center;">
                        <span id="net-ssid" class="badge">Checking WiFi...</span>
                    </div>
                </div>
                <div class="btn-group">
                    <button id="btn-reboot" class="btn secondary">Reboot</button>
                    <button id="btn-shutdown" class="btn danger">Shutdown</button>
                </div>
                <hr style="border-color: #333;">
                <hr style="border-color: #333;">
                <h3>Configuration</h3>
                <div class="input-group">
                    <label>Node Role</label>
                    <select id="conf-node-id"
                        style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555; border-radius: 4px;">
                        <option value="CAM_L">CAM_L (Left)</option>
                        <option value="CAM_C">CAM_C (Center)</option>
                        <option value="CAM_R">CAM_R (Right)</option>
                    </select>
                </div>
                <!-- Quality is now forced MAX -->
                <div class="input-group">
                    <label>Quality Profile</label>
                    <input type="text" value="MAX (4K @ 30fps / 40Mbps)" disabled
                        style="background: #222; color: #888; border: 1px solid #333;">
                </div>
                <button id="btn-save-conf" class="btn primary">Save Role</button>
            </div>

            <!-- Mesh Status (For CAM_C) -->
            <div class="card" id="mesh-panel" style="display:none; border: 1px solid #0ea5e9;">
                <h3>Mesh Status</h3>
                <div id="mesh-grid">
                    <p>Loading peers...</p>
                </div>
            </div>

            <!-- Recordings List -->
            <div class="card list-card">
                <h3>Local Recordings</h3>
                <ul id="file-list">
                    <li>Loading...</li>
                </ul>
            </div>
        </main>
    </div>
    <script src="app.js"></script>
</body>

</html>